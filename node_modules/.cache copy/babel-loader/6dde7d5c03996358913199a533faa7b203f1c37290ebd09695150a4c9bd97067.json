{"ast":null,"code":"import _css from '@emotion/css';\nimport { objectWithoutPropertiesLoose as _objectWithoutPropertiesLoose, extends as _extends } from '../_virtual/_rollupPluginBabelHelpers.js';\nimport { getStylesObject, cleanChildren, isString, __DEV__, isArray } from '@sajari/react-sdk-utils';\nimport { forwardRef, useMemo, useState, useEffect } from 'react';\nimport { jsx, jsxs } from '@emotion/core/jsx-runtime';\nimport Box from '../Box/index.esm.js';\nimport { useId } from '@react-aria/utils';\nimport Label from '../Label/index.esm.js';\nimport { useSelect } from 'downshift';\nimport SelectContextProvider from './context.esm.js';\nimport Button from './components/Button/index.esm.js';\nexport { default as Option } from './components/Option/index.esm.js';\nimport Dropdown from './components/Dropdown/index.esm.js';\nimport { useSelectStyles } from './styles.esm.js';\nvar _excluded = [\"id\", \"children\", \"label\", \"name\", \"value\", \"onChange\", \"size\", \"disabled\", \"invalid\", \"multiple\", \"autofocus\", \"text\", \"disableDefaultStyles\", \"styles\", \"className\", \"buttonClassName\", \"dropdownClassName\", \"optionClassName\", \"downshiftEnvironment\"];\nvar Select = /*#__PURE__*/forwardRef(function (props, ref) {\n  var _props$id = props.id,\n    id = _props$id === void 0 ? \"select-\" + useId() : _props$id,\n    children = props.children,\n    label = props.label,\n    name = props.name,\n    value = props.value,\n    onChange = props.onChange,\n    _props$size = props.size,\n    size = _props$size === void 0 ? 'md' : _props$size,\n    _props$disabled = props.disabled,\n    disabled = _props$disabled === void 0 ? false : _props$disabled,\n    _props$invalid = props.invalid,\n    invalid = _props$invalid === void 0 ? false : _props$invalid,\n    _props$multiple = props.multiple,\n    multiple = _props$multiple === void 0 ? false : _props$multiple,\n    _props$autofocus = props.autofocus,\n    autofocus = _props$autofocus === void 0 ? false : _props$autofocus,\n    text = props.text,\n    _props$disableDefault = props.disableDefaultStyles,\n    disableDefaultStyles = _props$disableDefault === void 0 ? false : _props$disableDefault,\n    stylesProp = props.styles,\n    className = props.className,\n    buttonClassName = props.buttonClassName,\n    dropdownClassName = props.dropdownClassName,\n    optionClassName = props.optionClassName,\n    environment = props.downshiftEnvironment,\n    rest = _objectWithoutPropertiesLoose(props, _excluded);\n  var _useSelectStyles = useSelectStyles(),\n    selectStyles = _useSelectStyles.styles;\n  var styles = getStylesObject(selectStyles, disableDefaultStyles);\n  var stateReducer = function stateReducer(state, actionAndChanges) {\n    var changes = actionAndChanges.changes,\n      type = actionAndChanges.type;\n    switch (type) {\n      case useSelect.stateChangeTypes.ToggleButtonKeyDownEnter:\n      case useSelect.stateChangeTypes.ToggleButtonKeyDownSpaceButton:\n      case useSelect.stateChangeTypes.ItemClick:\n        return _extends({}, changes, {\n          isOpen: multiple,\n          highlightedIndex: state.highlightedIndex\n        });\n      default:\n        return changes;\n    }\n  };\n  var itemToString = function itemToString(item) {\n    var _item$value$toString, _item$value;\n    return (_item$value$toString = item == null ? void 0 : (_item$value = item.value) == null ? void 0 : _item$value.toString()) != null ? _item$value$toString : '';\n  };\n  var items = useMemo(function () {\n    return cleanChildren(children).reduce(function (out, _ref) {\n      var optionProps = _ref.props;\n      out.push(optionProps);\n      return out;\n    }, []);\n  }, [children]);\n  var mapValues = function mapValues(input) {\n    if (typeof input === 'undefined') {\n      return [];\n    }\n    var values = isArray(input) ? input.map(String) : [input.toString()];\n    return multiple ? values : values.slice(0, 1);\n  };\n  var _React$useState = useState(mapValues(value)),\n    selectedItems = _React$useState[0],\n    setSelectedItems = _React$useState[1];\n  var setSelected = function setSelected(selected) {\n    setSelectedItems(selected);\n    if (onChange) {\n      var first = selected[0];\n      onChange(multiple ? selected : first);\n    }\n  };\n  useEffect(function () {\n    setSelectedItems(mapValues(value));\n  }, [value]);\n  var _useSelect = useSelect(_extends({}, environment && {\n      environment: environment\n    }, {\n      items: items,\n      stateReducer: stateReducer,\n      selectedItem: null,\n      initialHighlightedIndex: items.findIndex(function (_ref2) {\n        var v = _ref2.value;\n        return v.toString() === selectedItems[0];\n      }),\n      itemToString: itemToString,\n      onSelectedItemChange: function onSelectedItemChange(_ref3) {\n        var selectedItem = _ref3.selectedItem;\n        if (!selectedItem) {\n          return;\n        }\n        var selectedValue = itemToString(selectedItem);\n        if (!multiple) {\n          setSelected([selectedValue]);\n          return;\n        }\n        var index = selectedItems.findIndex(function (v) {\n          return v === selectedValue;\n        });\n        if (index > 0) {\n          setSelected([].concat(selectedItems.slice(0, index), selectedItems.slice(index + 1)));\n        } else if (index === 0) {\n          setSelected([].concat(selectedItems.slice(1)));\n        } else {\n          setSelected([].concat(selectedItems, [selectedValue]));\n        }\n      }\n    })),\n    open = _useSelect.isOpen,\n    getToggleButtonProps = _useSelect.getToggleButtonProps,\n    getLabelProps = _useSelect.getLabelProps,\n    getMenuProps = _useSelect.getMenuProps,\n    highlightedIndex = _useSelect.highlightedIndex,\n    getItemProps = _useSelect.getItemProps;\n  var context = {\n    id: id,\n    open: open,\n    items: items,\n    selectedItems: selectedItems,\n    highlightedIndex: highlightedIndex,\n    getMenuProps: getMenuProps,\n    getItemProps: getItemProps,\n    getToggleButtonProps: getToggleButtonProps,\n    itemToString: itemToString,\n    multiple: multiple,\n    disabled: disabled,\n    invalid: invalid,\n    autofocus: autofocus,\n    size: size,\n    text: text,\n    disableDefaultStyles: disableDefaultStyles,\n    customClassNames: {\n      buttonClassName: buttonClassName,\n      dropdownClassName: dropdownClassName,\n      optionClassName: optionClassName\n    }\n  };\n  var renderInputs = isString(name) && !disabled;\n  return jsx(SelectContextProvider, {\n    value: context,\n    children: jsxs(Box, _extends({\n      css: /*#__PURE__*/_css([styles.container, stylesProp], \";label:Select;\" + (process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5R1ciLCJmaWxlIjoiaW5kZXgudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlSWQgfSBmcm9tICdAcmVhY3QtYXJpYS91dGlscyc7XHJcbmltcG9ydCB7IF9fREVWX18sIGNsZWFuQ2hpbGRyZW4sIGdldFN0eWxlc09iamVjdCwgaXNBcnJheSwgaXNTdHJpbmcgfSBmcm9tICdAc2FqYXJpL3JlYWN0LXNkay11dGlscyc7XHJcbmltcG9ydCB7IHVzZVNlbGVjdCB9IGZyb20gJ2Rvd25zaGlmdCc7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IEJveCBmcm9tICcuLi9Cb3gnO1xyXG5pbXBvcnQgTGFiZWwgZnJvbSAnLi4vTGFiZWwnO1xyXG5pbXBvcnQgQnV0dG9uIGZyb20gJy4vY29tcG9uZW50cy9CdXR0b24nO1xyXG5pbXBvcnQgRHJvcGRvd24gZnJvbSAnLi9jb21wb25lbnRzL0Ryb3Bkb3duJztcclxuaW1wb3J0IFNlbGVjdENvbnRleHRQcm92aWRlciBmcm9tICcuL2NvbnRleHQnO1xyXG5pbXBvcnQgeyB1c2VTZWxlY3RTdHlsZXMgfSBmcm9tICcuL3N0eWxlcyc7XHJcbmNvbnN0IFNlbGVjdCA9IFJlYWN0LmZvcndhcmRSZWYoKHByb3BzLCByZWYpID0+IHtcclxuICAgIGNvbnN0IHsgaWQgPSBgc2VsZWN0LSR7dXNlSWQoKX1gLCBjaGlsZHJlbiwgbGFiZWwsIG5hbWUsIHZhbHVlLCBvbkNoYW5nZSwgc2l6ZSA9ICdtZCcsIGRpc2FibGVkID0gZmFsc2UsIGludmFsaWQgPSBmYWxzZSwgbXVsdGlwbGUgPSBmYWxzZSwgYXV0b2ZvY3VzID0gZmFsc2UsIHRleHQsIGRpc2FibGVEZWZhdWx0U3R5bGVzID0gZmFsc2UsIHN0eWxlczogc3R5bGVzUHJvcCwgY2xhc3NOYW1lLCBidXR0b25DbGFzc05hbWUsIGRyb3Bkb3duQ2xhc3NOYW1lLCBvcHRpb25DbGFzc05hbWUsIGRvd25zaGlmdEVudmlyb25tZW50OiBlbnZpcm9ubWVudCwgLi4ucmVzdCB9ID0gcHJvcHM7XHJcbiAgICBjb25zdCB7IHN0eWxlczogc2VsZWN0U3R5bGVzIH0gPSB1c2VTZWxlY3RTdHlsZXMoKTtcclxuICAgIGNvbnN0IHN0eWxlcyA9IGdldFN0eWxlc09iamVjdChzZWxlY3RTdHlsZXMsIGRpc2FibGVEZWZhdWx0U3R5bGVzKTtcclxuICAgIGNvbnN0IHN0YXRlUmVkdWNlciA9IChzdGF0ZSwgYWN0aW9uQW5kQ2hhbmdlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgY2hhbmdlcywgdHlwZSB9ID0gYWN0aW9uQW5kQ2hhbmdlcztcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSB1c2VTZWxlY3Quc3RhdGVDaGFuZ2VUeXBlcy5Ub2dnbGVCdXR0b25LZXlEb3duRW50ZXI6XHJcbiAgICAgICAgICAgIGNhc2UgdXNlU2VsZWN0LnN0YXRlQ2hhbmdlVHlwZXMuVG9nZ2xlQnV0dG9uS2V5RG93blNwYWNlQnV0dG9uOlxyXG4gICAgICAgICAgICBjYXNlIHVzZVNlbGVjdC5zdGF0ZUNoYW5nZVR5cGVzLkl0ZW1DbGljazpcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4uY2hhbmdlcyxcclxuICAgICAgICAgICAgICAgICAgICBpc09wZW46IG11bHRpcGxlLFxyXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodGVkSW5kZXg6IHN0YXRlLmhpZ2hsaWdodGVkSW5kZXgsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoYW5nZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IGl0ZW1Ub1N0cmluZyA9IChpdGVtKSA9PiBpdGVtPy52YWx1ZT8udG9TdHJpbmcoKSA/PyAnJztcclxuICAgIGNvbnN0IGl0ZW1zID0gUmVhY3QudXNlTWVtbygoKSA9PiBjbGVhbkNoaWxkcmVuKGNoaWxkcmVuKS5yZWR1Y2UoKG91dCwgeyBwcm9wczogb3B0aW9uUHJvcHMgfSkgPT4ge1xyXG4gICAgICAgIG91dC5wdXNoKG9wdGlvblByb3BzKTtcclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfSwgW10pLCBbY2hpbGRyZW5dKTtcclxuICAgIGNvbnN0IG1hcFZhbHVlcyA9IChpbnB1dCkgPT4ge1xyXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdmFsdWVzID0gaXNBcnJheShpbnB1dCkgPyBpbnB1dC5tYXAoU3RyaW5nKSA6IFtpbnB1dC50b1N0cmluZygpXTtcclxuICAgICAgICByZXR1cm4gbXVsdGlwbGUgPyB2YWx1ZXMgOiB2YWx1ZXMuc2xpY2UoMCwgMSk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgW3NlbGVjdGVkSXRlbXMsIHNldFNlbGVjdGVkSXRlbXNdID0gUmVhY3QudXNlU3RhdGUobWFwVmFsdWVzKHZhbHVlKSk7XHJcbiAgICBjb25zdCBzZXRTZWxlY3RlZCA9IChzZWxlY3RlZCkgPT4ge1xyXG4gICAgICAgIHNldFNlbGVjdGVkSXRlbXMoc2VsZWN0ZWQpO1xyXG4gICAgICAgIGlmIChvbkNoYW5nZSkge1xyXG4gICAgICAgICAgICBjb25zdCBbZmlyc3RdID0gc2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlKG11bHRpcGxlID8gc2VsZWN0ZWQgOiBmaXJzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgc2V0U2VsZWN0ZWRJdGVtcyhtYXBWYWx1ZXModmFsdWUpKTtcclxuICAgIH0sIFt2YWx1ZV0pO1xyXG4gICAgY29uc3QgeyBpc09wZW46IG9wZW4sIGdldFRvZ2dsZUJ1dHRvblByb3BzLCBnZXRMYWJlbFByb3BzLCBnZXRNZW51UHJvcHMsIGhpZ2hsaWdodGVkSW5kZXgsIGdldEl0ZW1Qcm9wcywgfSA9IHVzZVNlbGVjdCh7XHJcbiAgICAgICAgLi4uKGVudmlyb25tZW50ICYmIHsgZW52aXJvbm1lbnQgfSksXHJcbiAgICAgICAgaXRlbXMsXHJcbiAgICAgICAgc3RhdGVSZWR1Y2VyLFxyXG4gICAgICAgIHNlbGVjdGVkSXRlbTogbnVsbCxcclxuICAgICAgICBpbml0aWFsSGlnaGxpZ2h0ZWRJbmRleDogaXRlbXMuZmluZEluZGV4KCh7IHZhbHVlOiB2IH0pID0+IHYudG9TdHJpbmcoKSA9PT0gc2VsZWN0ZWRJdGVtc1swXSksXHJcbiAgICAgICAgaXRlbVRvU3RyaW5nLFxyXG4gICAgICAgIG9uU2VsZWN0ZWRJdGVtQ2hhbmdlOiAoeyBzZWxlY3RlZEl0ZW0gfSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXNlbGVjdGVkSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVmFsdWUgPSBpdGVtVG9TdHJpbmcoc2VsZWN0ZWRJdGVtKTtcclxuICAgICAgICAgICAgaWYgKCFtdWx0aXBsZSkge1xyXG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWQoW3NlbGVjdGVkVmFsdWVdKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHNlbGVjdGVkSXRlbXMuZmluZEluZGV4KCh2KSA9PiB2ID09PSBzZWxlY3RlZFZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWQoWy4uLnNlbGVjdGVkSXRlbXMuc2xpY2UoMCwgaW5kZXgpLCAuLi5zZWxlY3RlZEl0ZW1zLnNsaWNlKGluZGV4ICsgMSldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWQoWy4uLnNlbGVjdGVkSXRlbXMuc2xpY2UoMSldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkKFsuLi5zZWxlY3RlZEl0ZW1zLCBzZWxlY3RlZFZhbHVlXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBjb250ZXh0ID0ge1xyXG4gICAgICAgIGlkLFxyXG4gICAgICAgIG9wZW4sXHJcbiAgICAgICAgaXRlbXMsXHJcbiAgICAgICAgc2VsZWN0ZWRJdGVtcyxcclxuICAgICAgICBoaWdobGlnaHRlZEluZGV4LFxyXG4gICAgICAgIGdldE1lbnVQcm9wcyxcclxuICAgICAgICBnZXRJdGVtUHJvcHMsXHJcbiAgICAgICAgZ2V0VG9nZ2xlQnV0dG9uUHJvcHMsXHJcbiAgICAgICAgaXRlbVRvU3RyaW5nLFxyXG4gICAgICAgIG11bHRpcGxlLFxyXG4gICAgICAgIGRpc2FibGVkLFxyXG4gICAgICAgIGludmFsaWQsXHJcbiAgICAgICAgYXV0b2ZvY3VzLFxyXG4gICAgICAgIHNpemUsXHJcbiAgICAgICAgdGV4dCxcclxuICAgICAgICBkaXNhYmxlRGVmYXVsdFN0eWxlcyxcclxuICAgICAgICBjdXN0b21DbGFzc05hbWVzOiB7XHJcbiAgICAgICAgICAgIGJ1dHRvbkNsYXNzTmFtZSxcclxuICAgICAgICAgICAgZHJvcGRvd25DbGFzc05hbWUsXHJcbiAgICAgICAgICAgIG9wdGlvbkNsYXNzTmFtZSxcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlbmRlcklucHV0cyA9IGlzU3RyaW5nKG5hbWUpICYmICFkaXNhYmxlZDtcclxuICAgIHJldHVybiAoPFNlbGVjdENvbnRleHRQcm92aWRlciB2YWx1ZT17Y29udGV4dH0+XG4gICAgICA8Qm94IGNzcz17W3N0eWxlcy5jb250YWluZXIsIHN0eWxlc1Byb3BdfSByZWY9e3JlZn0gY2xhc3NOYW1lPXtjbGFzc05hbWV9IHsuLi5yZXN0fT5cbiAgICAgICAge2xhYmVsICYmICg8TGFiZWwgdmlzdWFsbHlIaWRkZW4gey4uLmdldExhYmVsUHJvcHMoKX0+XG4gICAgICAgICAgICB7bGFiZWx9XG4gICAgICAgICAgPC9MYWJlbD4pfVxuXG4gICAgICAgIDxCdXR0b24gLz5cblxuICAgICAgICA8RHJvcGRvd24gLz5cblxuICAgICAgICB7cmVuZGVySW5wdXRzICYmXHJcbiAgICAgICAgICAgIHNlbGVjdGVkSXRlbXMubWFwKCh2KSA9PiA8Qm94IGFzPVwiaW5wdXRcIiB0eXBlPVwiaGlkZGVuXCIgbmFtZT17bmFtZX0gdmFsdWU9e3Z9IGtleT17YCR7bmFtZX0tJHt2fWB9Lz4pfVxuICAgICAgPC9Cb3g+XG4gICAgPC9TZWxlY3RDb250ZXh0UHJvdmlkZXI+KTtcclxufSk7XHJcbmlmIChfX0RFVl9fKSB7XHJcbiAgICBTZWxlY3QuZGlzcGxheU5hbWUgPSAnU2VsZWN0JztcclxufVxyXG5leHBvcnQgZGVmYXVsdCBTZWxlY3Q7XHJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgT3B0aW9uIH0gZnJvbSAnLi9jb21wb25lbnRzL09wdGlvbic7XHJcbmV4cG9ydCAqIGZyb20gJy4vY29tcG9uZW50cy9PcHRpb24nO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qc3gubWFwIl19 */\")),\n      ref: ref,\n      className: className\n    }, rest, {\n      children: [label && jsx(Label, _extends({\n        visuallyHidden: true\n      }, getLabelProps(), {\n        children: label\n      })), jsx(Button, {}), jsx(Dropdown, {}), renderInputs && selectedItems.map(function (v) {\n        return jsx(Box, {\n          as: \"input\",\n          type: \"hidden\",\n          name: name,\n          value: v\n        }, name + \"-\" + v);\n      })]\n    }))\n  });\n});\nif (__DEV__) {\n  Select.displayName = 'Select';\n}\nexport default Select;","map":{"version":3,"names":["Select","forwardRef","props","ref","_props$id","id","useId","children","label","name","value","onChange","size","_props$size","disabled","_props$disabled","invalid","_props$invalid","multiple","_props$multiple","autofocus","_props$autofocus","text","disableDefaultStyles","_props$disableDefault","stylesProp","styles","className","buttonClassName","dropdownClassName","optionClassName","environment","downshiftEnvironment","rest","_objectWithoutPropertiesLoose","_excluded","_useSelectStyles","useSelectStyles","selectStyles","getStylesObject","stateReducer","state","actionAndChanges","changes","type","useSelect","stateChangeTypes","ToggleButtonKeyDownEnter","ToggleButtonKeyDownSpaceButton","ItemClick","_extends","isOpen","highlightedIndex","itemToString","item","_item$value$toString","_item$value","toString","items","useMemo","cleanChildren","reduce","out","_ref","optionProps","push","mapValues","input","values","isArray","map","String","slice","_React$useState","useState","selectedItems","setSelectedItems","setSelected","selected","first","useEffect","_useSelect","selectedItem","initialHighlightedIndex","findIndex","_ref2","v","onSelectedItemChange","_ref3","selectedValue","index","concat","open","getToggleButtonProps","getLabelProps","getMenuProps","getItemProps","context","customClassNames","renderInputs","isString","jsx","SelectContextProvider","jsxs","Box","css","_css","container","process","env","NODE_ENV","Label","visuallyHidden","Button","Dropdown","as","__DEV__","displayName"],"sources":["C:\\Users\\이세희\\Documents\\project_oyr\\node_modules\\@sajari\\react-components\\src\\Select\\index.tsx"],"sourcesContent":["import { useId } from '@react-aria/utils';\nimport { __DEV__, cleanChildren, getStylesObject, isArray, isString } from '@sajari/react-sdk-utils';\nimport { useSelect, UseSelectState, UseSelectStateChangeOptions } from 'downshift';\nimport * as React from 'react';\n\nimport Box from '../Box';\nimport Label from '../Label';\nimport Button from './components/Button';\nimport Dropdown from './components/Dropdown';\nimport { OptionProps } from './components/Option';\nimport SelectContextProvider from './context';\nimport { useSelectStyles } from './styles';\nimport { Item, SelectProps } from './types';\n\nconst Select = React.forwardRef((props: SelectProps, ref?: React.Ref<HTMLDivElement>) => {\n  const {\n    id = `select-${useId()}`,\n    children,\n    label,\n    name,\n    value,\n    onChange,\n    size = 'md',\n    disabled = false,\n    invalid = false,\n    multiple = false,\n    autofocus = false,\n    text,\n    disableDefaultStyles = false,\n    styles: stylesProp,\n    className,\n    buttonClassName,\n    dropdownClassName,\n    optionClassName,\n    downshiftEnvironment: environment,\n    ...rest\n  } = props;\n\n  const { styles: selectStyles } = useSelectStyles();\n  const styles = getStylesObject(selectStyles, disableDefaultStyles);\n\n  const stateReducer = (state: UseSelectState<Item>, actionAndChanges: UseSelectStateChangeOptions<Item>) => {\n    const { changes, type } = actionAndChanges;\n\n    switch (type) {\n      case useSelect.stateChangeTypes.ToggleButtonKeyDownEnter:\n      case useSelect.stateChangeTypes.ToggleButtonKeyDownSpaceButton:\n      case useSelect.stateChangeTypes.ItemClick:\n        return {\n          ...changes,\n          isOpen: multiple, // Keep menu open after selection for multiple\n          highlightedIndex: state.highlightedIndex,\n        };\n\n      default:\n        return changes;\n    }\n  };\n\n  const itemToString = (item: Item): string => item?.value?.toString() ?? '';\n\n  // Build items list from children\n  const items: Array<Item> = React.useMemo(\n    () =>\n      cleanChildren(children).reduce((out, { props: optionProps }: { props: OptionProps }) => {\n        out.push(optionProps);\n        return out;\n      }, [] as Array<Item>),\n    [children],\n  );\n\n  const mapValues = (input?: SelectProps['value']) => {\n    if (typeof input === 'undefined') {\n      return [];\n    }\n\n    // Determine initial values\n    const values = isArray(input) ? input.map(String) : [input.toString()];\n\n    return multiple ? values : values.slice(0, 1);\n  };\n\n  // If no `value` prop is set, get selected props from children\n  const [selectedItems, setSelectedItems] = React.useState<Array<string>>(mapValues(value));\n\n  // Fire onChange and set state\n  const setSelected = (selected: Array<string>) => {\n    setSelectedItems(selected);\n\n    if (onChange) {\n      const [first] = selected;\n      onChange(multiple ? selected : first);\n    }\n  };\n\n  React.useEffect(() => {\n    setSelectedItems(mapValues(value));\n  }, [value]);\n\n  const {\n    isOpen: open,\n    getToggleButtonProps,\n    getLabelProps,\n    getMenuProps,\n    highlightedIndex,\n    getItemProps,\n  } = useSelect<Item>({\n    ...(environment && { environment }),\n    items,\n    stateReducer,\n    selectedItem: null,\n    initialHighlightedIndex: items.findIndex(({ value: v }) => v.toString() === selectedItems[0]),\n    itemToString,\n    onSelectedItemChange: ({ selectedItem }) => {\n      if (!selectedItem) {\n        return;\n      }\n\n      const selectedValue = itemToString(selectedItem);\n\n      if (!multiple) {\n        setSelected([selectedValue]);\n        return;\n      }\n\n      const index = selectedItems.findIndex((v) => v === selectedValue);\n\n      if (index > 0) {\n        setSelected([...selectedItems.slice(0, index), ...selectedItems.slice(index + 1)]);\n      } else if (index === 0) {\n        setSelected([...selectedItems.slice(1)]);\n      } else {\n        setSelected([...selectedItems, selectedValue]);\n      }\n    },\n  });\n\n  const context = {\n    id,\n    open,\n    items,\n    selectedItems,\n    highlightedIndex,\n    getMenuProps,\n    getItemProps,\n    getToggleButtonProps,\n    itemToString,\n    multiple,\n    disabled,\n    invalid,\n    autofocus,\n    size,\n    text,\n    disableDefaultStyles,\n    customClassNames: {\n      buttonClassName,\n      dropdownClassName,\n      optionClassName,\n    },\n  };\n\n  // Render hidden inputs for form submissions if name is set\n  const renderInputs = isString(name) && !disabled;\n\n  return (\n    <SelectContextProvider value={context}>\n      <Box css={[styles.container, stylesProp]} ref={ref} className={className} {...rest}>\n        {label && (\n          <Label visuallyHidden {...getLabelProps()}>\n            {label}\n          </Label>\n        )}\n\n        <Button />\n\n        <Dropdown />\n\n        {renderInputs &&\n          selectedItems.map((v) => <Box as=\"input\" type=\"hidden\" name={name} value={v} key={`${name}-${v}`} />)}\n      </Box>\n    </SelectContextProvider>\n  );\n});\n\nif (__DEV__) {\n  Select.displayName = 'Select';\n}\n\nexport default Select;\nexport { default as Option } from './components/Option';\nexport * from './components/Option';\nexport type { SelectProps };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}