{"ast":null,"code":"import { isSSR } from '@sajari/react-sdk-utils';\nimport { useRef, useState, useEffect } from 'react';\nfunction useHasImageLoaded(props) {\n  var src = props.src,\n    onLoad = props.onLoad,\n    onError = props.onError;\n  var ref = useRef(true);\n  var _useState = useState(false),\n    hasLoaded = _useState[0],\n    setHasLoaded = _useState[1];\n  useEffect(function () {\n    if (!src || isSSR()) {\n      return;\n    }\n    var image = new window.Image();\n    image.addEventListener('load', function (event) {\n      if (ref.current) {\n        setHasLoaded(true);\n        if (onLoad) {\n          onLoad.call(image, event);\n        }\n      }\n    });\n    image.addEventListener('error', function (event) {\n      if (ref.current) {\n        setHasLoaded(false);\n        if (onError) {\n          onError.call(image, event);\n        }\n      }\n    });\n    image.src = src;\n  }, [src, onLoad, onError]);\n  useEffect(function () {\n    return function () {\n      ref.current = false;\n    };\n  }, []);\n  return hasLoaded;\n}\nexport { useHasImageLoaded };","map":{"version":3,"names":["useHasImageLoaded","props","src","onLoad","onError","ref","useRef","_useState","useState","hasLoaded","setHasLoaded","useEffect","isSSR","image","window","Image","addEventListener","event","current","call"],"sources":["C:\\Users\\이세희\\Documents\\project_oyr\\node_modules\\@sajari\\react-components\\src\\hooks\\useHasImageLoaded.ts"],"sourcesContent":["import { isSSR } from '@sajari/react-sdk-utils';\nimport { useEffect, useRef, useState } from 'react';\n\nimport { ImageProps } from '../Image/types';\n\n// TODO: Handle load failed fallback\n\ninterface HasImageLoadedProps {\n  src?: ImageProps['src'];\n  onLoad?: ImageProps['onLoad'];\n  onError?: ImageProps['onError'];\n}\n\nexport function useHasImageLoaded(props: HasImageLoadedProps) {\n  const { src, onLoad, onError } = props;\n  const ref = useRef(true);\n  const [hasLoaded, setHasLoaded] = useState(false);\n\n  useEffect(() => {\n    if (!src || isSSR()) {\n      return;\n    }\n\n    const image = new window.Image();\n\n    image.addEventListener('load', (event) => {\n      if (ref.current) {\n        setHasLoaded(true);\n\n        if (onLoad) {\n          onLoad.call(image, event);\n        }\n      }\n    });\n\n    image.addEventListener('error', (event) => {\n      if (ref.current) {\n        setHasLoaded(false);\n\n        if (onError) {\n          onError.call(image, event);\n        }\n      }\n    });\n\n    image.src = src;\n  }, [src, onLoad, onError]);\n\n  // eslint-disable-next-line arrow-body-style\n  useEffect(() => {\n    return () => {\n      ref.current = false;\n    };\n  }, []);\n\n  return hasLoaded;\n}\n"],"mappings":";;SAagBA,kBAAkBC,KAAA;EAChC,IAAQC,GAAR,GAAiCD,KAAjC,CAAQC,GAAR;IAAaC,MAAb,GAAiCF,KAAjC,CAAaE,MAAb;IAAqBC,OAArB,GAAiCH,KAAjC,CAAqBG,OAArB;EACA,IAAMC,GAAG,GAAGC,MAAM,CAAC,IAAD,CAAlB;EACA,IAAAC,SAAA,GAAkCC,QAAQ,CAAC,KAAD,CAA1C;IAAOC,SAAP,GAAAF,SAAA;IAAkBG,YAAlB,GAAAH,SAAA;EAEAI,SAAS,CAAC;IACR,IAAI,CAACT,GAAD,IAAQU,KAAK,EAAjB,EAAqB;MACnB;;IAGF,IAAMC,KAAK,GAAG,IAAIC,MAAM,CAACC,KAAX,EAAd;IAEAF,KAAK,CAACG,gBAAN,CAAuB,MAAvB,EAA+B,UAACC,KAAD;MAC7B,IAAIZ,GAAG,CAACa,OAAR,EAAiB;QACfR,YAAY,CAAC,IAAD,CAAZ;QAEA,IAAIP,MAAJ,EAAY;UACVA,MAAM,CAACgB,IAAP,CAAYN,KAAZ,EAAmBI,KAAnB;;;KALN;IAUAJ,KAAK,CAACG,gBAAN,CAAuB,OAAvB,EAAgC,UAACC,KAAD;MAC9B,IAAIZ,GAAG,CAACa,OAAR,EAAiB;QACfR,YAAY,CAAC,KAAD,CAAZ;QAEA,IAAIN,OAAJ,EAAa;UACXA,OAAO,CAACe,IAAR,CAAaN,KAAb,EAAoBI,KAApB;;;KALN;IAUAJ,KAAK,CAACX,GAAN,GAAYA,GAAZ;GA3BO,EA4BN,CAACA,GAAD,EAAMC,MAAN,EAAcC,OAAd,CA5BM,CAAT;EA+BAO,SAAS,CAAC;IACR,OAAO;MACLN,GAAG,CAACa,OAAJ,GAAc,KAAd;KADF;GADO,EAIN,EAJM,CAAT;EAMA,OAAOT,SAAP;AACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}