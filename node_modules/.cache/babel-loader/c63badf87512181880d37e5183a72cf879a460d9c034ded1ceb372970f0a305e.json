{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/reactstudy/reactstudy/src/components/PlannerWeather.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './PlannerWeather.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PlannerWeather(_ref) {\n  _s();\n  let {\n    isOpen,\n    closeModal,\n    tripLocation,\n    tripStartDate\n  } = _ref;\n  const [coords, saveCoords] = useState();\n  const [averageTemp, setAverageTemp] = useState();\n  const [weatherComment, setWeatherComment] = useState('');\n  function handleGeoSucc(position) {\n    const latitude = position.coords.latitude; // 위도\n    const longitude = position.coords.longitude; // 경도\n    const coordsObj = {\n      latitude,\n      longitude\n    };\n    saveCoords(coordsObj);\n    getWeatherData(latitude, longitude);\n  }\n  function handleGeoErr(err) {\n    console.log(\"geo err! \" + err);\n  }\n  function requestCoords() {\n    navigator.geolocation.getCurrentPosition(handleGeoSucc, handleGeoErr);\n  }\n  function getWeatherData(lat, lon) {\n    const oneYearAgo = new Date(tripStartDate);\n    oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);\n    const oneYearAgoTimestamp = Math.floor(oneYearAgo.getTime() / 1000);\n    fetch(`https://api.openweathermap.org/data/2.5/onecall/timemachine?lat=${lat}&lon=${lon}&dt=${oneYearAgoTimestamp}&appid=ad14089cb0bfefe6bd1b977b00f4f4b0`).then(res => res.json()).then(data => {\n      if (data && data.current && data.current.temp) {\n        const averageTemp = data.current.temp;\n        setAverageTemp(averageTemp);\n        const weather = data.current.weather[0].description;\n        setWeatherComment(getWeatherComment(averageTemp, weather));\n      } else {\n        console.log('Weather data is incomplete.');\n      }\n    }).catch(error => {\n      console.log('Error fetching weather data:', error);\n    });\n  }\n  function getWeatherComment(temperature, weather) {\n    let comment = '';\n    if (temperature > 25) {\n      comment += '덥고 ';\n    } else if (temperature < 10) {\n      comment += '추워요. ';\n    }\n    comment += weather;\n    return comment;\n  }\n  useEffect(() => {\n    if (isOpen) {\n      requestCoords();\n    }\n  }, [isOpen]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-container\",\n    style: {\n      display: isOpen ? 'block' : 'none'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-background\",\n      onClick: closeModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"modal-title\",\n        children: tripLocation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"weather-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"average-temperature\",\n          children: [\"~\\uC6D4 \\uD3C9\\uADE0 \\uAE30\\uC628: \", averageTemp, \"\\xB0C\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"weather-comment\",\n          children: weatherComment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s(PlannerWeather, \"DYE/y4b2ACwwIYO1FWh+EODUNdo=\");\n_c = PlannerWeather;\nexport default PlannerWeather;\nvar _c;\n$RefreshReg$(_c, \"PlannerWeather\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","PlannerWeather","_ref","_s","isOpen","closeModal","tripLocation","tripStartDate","coords","saveCoords","averageTemp","setAverageTemp","weatherComment","setWeatherComment","handleGeoSucc","position","latitude","longitude","coordsObj","getWeatherData","handleGeoErr","err","console","log","requestCoords","navigator","geolocation","getCurrentPosition","lat","lon","oneYearAgo","Date","setFullYear","getFullYear","oneYearAgoTimestamp","Math","floor","getTime","fetch","then","res","json","data","current","temp","weather","description","getWeatherComment","catch","error","temperature","comment","className","style","display","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/mac/Desktop/reactstudy/reactstudy/src/components/PlannerWeather.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './PlannerWeather.css';\n\nfunction PlannerWeather({ isOpen, closeModal, tripLocation, tripStartDate }) {\n  const [coords, saveCoords] = useState();\n  const [averageTemp, setAverageTemp] = useState();\n  const [weatherComment, setWeatherComment] = useState('');\n\n  function handleGeoSucc(position) {\n    const latitude = position.coords.latitude;  // 위도\n    const longitude = position.coords.longitude;  // 경도\n    const coordsObj = {\n      latitude,\n      longitude\n    };\n    saveCoords(coordsObj);\n    getWeatherData(latitude, longitude);\n  }\n\n  function handleGeoErr(err) {\n    console.log(\"geo err! \" + err);\n  }\n\n  function requestCoords() {\n    navigator.geolocation.getCurrentPosition(handleGeoSucc, handleGeoErr);\n  }\n\n  function getWeatherData(lat, lon) {\n    const oneYearAgo = new Date(tripStartDate);\n    oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);\n\n    const oneYearAgoTimestamp = Math.floor(oneYearAgo.getTime() / 1000);\n\n    fetch(`https://api.openweathermap.org/data/2.5/onecall/timemachine?lat=${lat}&lon=${lon}&dt=${oneYearAgoTimestamp}&appid=ad14089cb0bfefe6bd1b977b00f4f4b0`)\n      .then(res => res.json())\n      .then(data => {\n        if (data && data.current && data.current.temp) {\n          const averageTemp = data.current.temp;\n          setAverageTemp(averageTemp);\n          const weather = data.current.weather[0].description;\n          setWeatherComment(getWeatherComment(averageTemp, weather));\n        } else {\n          console.log('Weather data is incomplete.');\n        }\n      })\n      .catch(error => {\n        console.log('Error fetching weather data:', error);\n      });\n  }\n\n  function getWeatherComment(temperature, weather) {\n    let comment = '';\n    if (temperature > 25) {\n      comment += '덥고 ';\n    } else if (temperature < 10) {\n      comment += '추워요. ';\n    }\n    comment += weather;\n    return comment;\n  }\n\n  useEffect(() => {\n    if (isOpen) {\n      requestCoords();\n    }\n  }, [isOpen]);\n\n  return (\n    <div className=\"modal-container\" style={{ display: isOpen ? 'block' : 'none' }}>\n      <div className=\"modal-background\" onClick={closeModal}></div>\n      <div className=\"modal-content\">\n        <h2 className=\"modal-title\">{tripLocation}</h2>\n        <div className=\"weather-info\">\n          <div className=\"average-temperature\">~월 평균 기온: {averageTemp}°C</div>\n          <div className=\"weather-comment\">{weatherComment}</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default PlannerWeather;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}